<div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-8">
  <div class="container mx-auto px-4">
    <!-- Header du formulaire -->
    <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl border border-purple-500/20 p-6 mb-8">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <div class="w-12 h-12 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center">
            <span class="text-2xl">ğŸš€</span>
          </div>
          <div>
            <h1 class="text-3xl font-bold text-white">CrÃ©er une Session</h1>
            <p class="text-gray-400">Configure ta prochaine session de jeu Ã©pique !</p>
          </div>
        </div>
        <button
          (click)="onCancel()"
          class="cancel-btn"
          type="button">
          <span class="mr-2">âœ•</span>
          Annuler
        </button>
      </div>
    </div>

    <!-- Formulaire principal -->
    <form [formGroup]="sessionForm" (ngSubmit)="onSubmit()" class="space-y-8">

      <!-- Section Date et Heure -->
      <div class="form-section">
        <h2 class="section-title">
          <span class="mr-3">ğŸ“…</span>
          Quand jouer ?
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Date de dÃ©but -->
          <div class="form-group">
            <label for="startDate" class="form-label">
              <span class="mr-2">ğŸ“†</span>
              Date de dÃ©but
            </label>
            <input
              id="startDate"
              type="date"
              formControlName="startDate"
              class="form-input"
              [class.border-red-500]="isFieldInvalid('startDate')">
            <div *ngIf="isFieldInvalid('startDate')" class="text-red-400 text-sm mt-1">
              La date de dÃ©but est requise
            </div>
          </div>

          <!-- Heure de dÃ©but -->
          <div class="form-group">
            <label for="startTime" class="form-label">
              <span class="mr-2">â°</span>
              Heure de dÃ©but
            </label>
            <input
              id="startTime"
              type="time"
              formControlName="startTime"
              class="form-input"
              [class.border-red-500]="isFieldInvalid('startTime')">
            <div *ngIf="isFieldInvalid('startTime')" class="text-red-400 text-sm mt-1">
              L'heure de dÃ©but est requise
            </div>
          </div>
        </div>
      </div>

      <!-- Section Jeu -->
    <div class="form-section">
      <h2 class="section-title">
        <span class="mr-3">ğŸ®</span>
        Ã€ quel jeu jouer ?
      </h2>

      <div class="game-card">
        <div class="flex items-center mb-4">
          <h3 class="text-lg font-bold text-white flex items-center">
            <span class="mr-2">ğŸ•¹ï¸</span>
            SÃ©lection du jeu
          </h3>
        </div>

        <div class="grid grid-cols-1 gap-4">
          <!-- SÃ©lection du jeu -->
          <div class="form-group">
            <label for="gameName" class="form-label">
              <span class="mr-2">ğŸ¯</span>
              Choisir un jeu
            </label>
            <select
              id="gameName"
              formControlName="gameName"
              class="form-input game-select"
              [class.border-red-500]="isFieldInvalid('gameName')">
              <option value="">SÃ©lectionne ton jeu...</option>
              <optgroup *ngFor="let category of gameCategories" [label]="category.label">
                <option
                  *ngFor="let game of getGamesByCategory(category.value)"
                  [value]="game.name"
                  [attr.data-category]="game.category">
                  {{ game.icon }} {{ game.name }}
                </option>
              </optgroup>
            </select>
            <div *ngIf="isFieldInvalid('gameName')" class="text-red-400 text-sm mt-1">
              Veuillez sÃ©lectionner un jeu
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Section Amis -->
    <div class="form-section">
      <h2 class="section-title">
        <span class="mr-3">ğŸ‘¥</span>
        Qui va jouer ?
      </h2>

      <div formArrayName="friends" class="space-y-4">
        <div
          *ngFor="let friend of friendsArray.controls; let i = index"
          [formGroupName]="i"
          class="friend-card bg-slate-800/30 backdrop-blur-sm rounded-lg border border-purple-500/10 p-4">

          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold text-white flex items-center">
              <span class="mr-2">ğŸ‘¤</span>
              Ami {{ i + 1 }}
            </h3>
            <button
              type="button"
              (click)="removeFriend(i)"
              [disabled]="friendsArray.length <= 1"
              class="text-red-400 hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed">
              <span class="text-xl">ğŸ—‘ï¸</span>
            </button>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Nom -->
            <div class="form-group">
              <label [for]="'surname-' + i" class="form-label">
                <span class="mr-2">ğŸ“</span>
                Nom
              </label>
              <input
                [id]="'surname-' + i"
                type="text"
                formControlName="surname"
                placeholder="Nom de famille"
                class="form-input"
                [class.border-red-500]="isArrayFieldInvalid(i, 'surname')">
              <div *ngIf="isArrayFieldInvalid(i, 'surname')" class="text-red-400 text-sm mt-1">
                Le nom est requis (min. 2 caractÃ¨res)
              </div>
            </div>

            <!-- PrÃ©nom -->
            <div class="form-group">
              <label [for]="'firstname-' + i" class="form-label">
                <span class="mr-2">ğŸ‘‹</span>
                PrÃ©nom
              </label>
              <input
                [id]="'firstname-' + i"
                type="text"
                formControlName="firstname"
                placeholder="PrÃ©nom"
                class="form-input"
                [class.border-red-500]="isArrayFieldInvalid(i, 'firstname')">
              <div *ngIf="isArrayFieldInvalid(i, 'firstname')" class="text-red-400 text-sm mt-1">
                Le prÃ©nom est requis (min. 2 caractÃ¨res)
              </div>
            </div>
          </div>
        </div>

        <!-- Bouton pour ajouter un ami -->
        <button
          type="button"
          (click)="addFriend()"
          class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center">
          <span class="mr-2">â•</span>
          Ajouter un ami
        </button>
      </div>
    </div>

    <!-- Actions -->
    <div class="form-section">
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <button
          type="button"
          (click)="onCancel()"
          class="cancel-btn-large"
          [disabled]="isSubmitting()">
          <span class="mr-2">â†©ï¸</span>
          Retour
        </button>

        <button
          type="submit"
          class="submit-btn"
          [disabled]="!sessionForm.valid || isSubmitting()">
          <span class="mr-2" *ngIf="!isSubmitting()">ğŸš€</span>
          <span class="mr-2 animate-spin" *ngIf="isSubmitting()">âš¡</span>
          {{ isSubmitting() ? 'CrÃ©ation en cours...' : 'CrÃ©er la Session' }}
        </button>
      </div>
    </div>
  </form>
</div>
</div>
